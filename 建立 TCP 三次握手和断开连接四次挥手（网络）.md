> 转载请注明原创出处，谢谢！
>
> [HappyFeet的博客](https://blog.csdn.net/haihui_yang)





---



A -> B 建立连接：

- A -> 发送 我想确认连接请求 SYN ，和初始序号 10000；

- B 接收到 A 的连接请求 SYN，对初始序号 +1 表示应答 10001，以及自身初始需要 20000；

- A 接收到 20000，返回应答 20001

小明和小红两个人想来一场约会：

- 小明：小红呀，我们俩 11：30 在咖啡厅见面吧？
- 小红：好呀，你要告诉我收到我的回复没？
- 小明：收到了



1) 请 求 端 ( 通 常 称 为 客 户 ) 发 送 一 个 S Y N 段 指 明 客 户 打 算 连 接 的 服 务 器 的 端 口 ， 以 及 初 始序号( I S N ，在这个例子中为 1 4 1 5 5 3 1 5 2 1 )。这个 S Y N 段为报文段 1 。

2) 服务器发回包含服务器的初始序号的 S Y N报文段(报文段 2)作为应答。同时，将确认 序号设置为客户的 I S N 加 1 以对客户的 S Y N 报文段进行确认。一个 S Y N 将占用一个序号。

3) 客 户 必 须 将 确 认 序 号 设 置 为 服 务 器 的 I S N 加 1 以 对 服 务 器 的 S Y N 报 文 段 进 行 确 认 ( 报 文 段3)。

这三个报文段完成连接的建立。这个过程也称为三次握手( three-way handshake)。



四次挥手（原因是数据能够双向传递，叫做全双工）：

A -> B 断开连接：

- A 给 B 说我要关闭连接啦 （发送 FIN）
- B 收到 A 的关闭连接请求，说收到了 （返回 FIN 的 ack）
- B 给 A 说我也要关闭连接啦 （发送 FIN）
- A 说好的，我收到啦 （返回 FIN 的 ack）

![image-20200222232558921](https://tva1.sinaimg.cn/large/0082zybpgy1gc5lfkxpnuj30z60r8mzu.jpg)





尾巴：



参考资料：

（1）

（2）